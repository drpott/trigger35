#!/usr/bin/env python

import sys
import os

PATH = os.getenv('TRIGGER_PATH')
sys.path.append(PATH)

from trigger.cmds import ReactorlessCommando
from trigger.tacacsrc import get_device_password
from trigger.netdevices import NetDevices
from twisted.internet import reactor, defer
from twisted.python import log
from tools.pprint import printResults

class showUserSessionList(ReactorlessCommando):
    def to_fortinet(self, dev, commands=None, extra=None):
        self.creds=get_device_password('esnh-fwl-01')
        commands = [
            'config vdom',
            'edit ESNH-ICN',
            'config system interface',
            'edit v202',
            'set vdom ESNH-ICN',
            'set ip 192.168.202.254 255.255.255.0',
            'set allowaccess ping',
            'set alias INTERCOM',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 202',
            'next',
            'config system interface',
            'edit v203',
            'set vdom ESNH-ICN',
            'set ip 192.168.203.254 255.255.255.0',
            'set allowaccess ping',
            'set alias ACCESSCTRL',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 203',
            'next',
            'config system interface',
            'edit v204',
            'set vdom ESNH-ICN',
            'set ip 192.168.204.254 255.255.255.0',
            'set allowaccess ping',
            'set alias EVCHARGING',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 204',
            'next',
            'config system interface',
            'edit v205',
            'set vdom ESNH-ICN',
            'set ip 192.168.205.254 255.255.255.0',
            'set allowaccess ping',
            'set alias BMS',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 205',
            'next',
            'config system interface',
            'edit v206',
            'set vdom ESNH-ICN',
            'set ip 192.168.206.254 255.255.255.0',
            'set allowaccess ping',
            'set alias INTEG',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 206',
            'next',
            'config system interface',
            'edit v207',
            'set vdom ESNH-ICN',
            'set ip 192.168.207.254 255.255.255.0',
            'set allowaccess ping',
            'set alias HYDRAULIC',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 207',
            'next',
            'config system interface',
            'edit v208',
            'set vdom ESNH-ICN',
            'set ip 192.168.208.254 255.255.255.0',
            'set allowaccess ping',
            'set alias AIRCOND',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 208',
            'next',
            'config system interface',
            'edit v209',
            'set vdom ESNH-ICN',
            'set ip 192.168.209.254 255.255.255.0',
            'set allowaccess ping',
            'set alias CARPARK',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 209',
            'next',
            'config system interface',
            'edit v210*',
            'set vdom ESNH-ICN',
            'set ip 192.168.210.254 255.255.255.0',
            'set allowaccess ping',
            'set alias VOIP',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 210',
            'next',
            'config system interface',
            'edit v211',
            'set vdom ESNH-ICN',
            'set ip 192.168.211.254 255.255.255.0',
            'set allowaccess ping',
            'set alias LIFTS',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 211',
            'next',
            'config system interface',
            'edit v212',
            'set vdom ESNH-ICN',
            'set ip 192.168.212.254 255.255.255.0',
            'set allowaccess ping',
            'set alias WASTE',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 212',
            'next',
            'config system interface',
            'edit v213',
            'set vdom ESNH-ICN',
            'set ip 192.168.213.254 255.255.255.0',
            'set allowaccess ping',
            'set alias SOLAR',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 2131',
            'next',
            'config system interface',
            'edit v214',
            'set vdom ESNH-ICN',
            'set ip 192.168.214.254 255.255.255.0',
            'set allowaccess ping',
            'set alias LIGHTING',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 214',
            'next',
            'config system interface',
            'edit v215',
            'set vdom ESNH-ICN',
            'set ip 192.168.215.254 255.255.255.0',
            'set allowaccess ping',
            'set alias DIGSIGNAGE',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 215',
            'next',
            'config system interface',
            'edit v216',
            'set vdom ESNH-ICN',
            'set ip 192.168.216.254 255.255.255.0',
            'set allowaccess ping',
            'set alias AUDIOSPKR',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 216',
            'next',
            'config system interface',
            'edit v217',
            'set vdom ESNH-ICN',
            'set ip 192.168.217.254 255.255.255.0',
            'set allowaccess ping',
            'set alias PPLCOUNT',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 217',
            'next',
            'config system interface',
            'edit v218',
            'set vdom ESNH-ICN',
            'set ip 192.168.218.254 255.255.255.0',
            'set allowaccess ping',
            'set alias IRRIGATION',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 218',
            'next',
            'config system interface',
            'edit v219',
            'set vdom ESNH-ICN',
            'set ip 192.168.219.254 255.255.255.0',
            'set allowaccess ping',
            'set alias NOTICEBRD',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 219',
            'next',
            'config system interface',
            'edit v220',
            'set vdom ESNH-ICN',
            'set ip 192.168.220.254 255.255.255.0',
            'set allowaccess ping',
            'set alias CMO',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 220',
            'next',
            'config system interface',
            'edit v2222',
            'set vdom ESNH-ICN',
            'set ip 10.22.0.254 255.255.255.0',
            'set allowaccess ping',
            'set alias BBWIFI',
            'set device-identification enable',
            'set role lan',
            'set interface lan',
            'set vlanid 2222',
            'next',
            'end',

            'show system interface']
        return commands


def stop_reactor(result):
    if reactor.running:
        log.msg('STOPPING REACTOR!')
        reactor.stop()
    return result


if __name__ == '__main__':

    c1 = showUserSessionList(['esnh-fwl-01'])
    instances = [c1]
    deferreds = []
    for i in instances:
        deferreds.append(i.run())

    d = defer.DeferredList(deferreds)
    d.addBoth(stop_reactor)
    reactor.run()

    for i in instances:
        printResults(i)
